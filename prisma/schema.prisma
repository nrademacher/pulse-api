// *** GENERATED BY PRISMIX :: DO NOT EDIT ***
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id              String    @id @default(cuid())
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  email           String    @unique
  name            String?
  passwordHash    String?
  role            UserRoles @default(SOFTWARE_DEVELOPER)
  team            String?
  displayName     String?
  bio             String?
  projects        Project[] @relation(name: "ProjectToUser")
  tasksAssignedBy Task[]    @relation(name: "AssignerToTask")
  tasksAssignedTo Task[]    @relation(name: "AssigneeToTask")

  @@map("users")
}

model Project {
  id     String  @id @default(cuid())
  user   User    @relation(name: "ProjectToUser", fields: [userId], references: [id])
  userId String
  boards Board[] @relation(name: "BoardToProject")

  @@map("projects")
}

model Board {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  title     String
  lists     List[]   @relation(name: "BoardToList")
  project   Project  @relation(name: "BoardToProject", fields: [projectId], references: [id])
  projectId String
}

model List {
  id        String   @id @default(cuid())
  board     Board    @relation(name: "BoardToList", fields: [boardId], references: [id])
  boardId   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  title     String
  tasks     Task[]   @relation(name: "ListToTask")

  @@map("lists")
}

model Task {
  id          String         @id @default(cuid())
  list        List           @relation(name: "ListToTask", fields: [listId], references: [id])
  listId      String
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  assignerId  String
  assigneeId  String
  assigner    User           @relation(name: "AssignerToTask", fields: [assignerId], references: [id])
  assignee    User           @relation(name: "AssigneeToTask", fields: [assigneeId], references: [id])
  title       String
  description String?
  priority    TaskPriorities @default(NORMAL)
  done        Boolean

  @@map("tasks")
}

enum UserRoles {
  PRODUCT_OWNER
  PROJECT_MANAGER
  TECHNICAL_LEAD
  SOFTWARE_DEVELOPER
}

enum TaskPriorities {
  LOW
  NORMAL
  HIGH
}
